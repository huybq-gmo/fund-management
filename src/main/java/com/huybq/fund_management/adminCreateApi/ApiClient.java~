package com.huybq.fund_management.adminCreateApi;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;

@Component
public class ApiClient {
    public ApiClient(@Value("${api.base-url}") String baseUrl) {
        this.webClient = WebClient.builder()
                .baseUrl(baseUrl)
                .defaultHeader(HttpHeaders.AUTHORIZATION, "Basic gdgfhdgfhdfgh")
                .defaultHeader(HttpHeaders.CONTENT_TYPE, "application/json")
                .defaultHeader(HttpHeaders.ACCEPT, "application/json")
                .build();
    }

    public String callApi(String accessToken) {
        return webClient.get()
                .uri("/some-endpoint")
                .header("X-Access-Token", accessToken) // thêm token từ cookie/request
                .retrieve()
                .bodyToMono(String.class)
                .block(); // hoặc subscribe() nếu async
    }
}